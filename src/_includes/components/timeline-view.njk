<div id="timeline-view">
  <div class="ticket-rail-header">
    <span>Ticket Rail</span>
  </div>

  <div id="timeline-steps" class="ticket-rail">
    {% for item in timeline %}
      {% if item.type == 'action' %}
        {% set step = item %}
        {% set isNext = loop.first %}
        {% include "components/step-card.njk" %}

      {% elif item.type == 'parallel' %}
        <div class="parallel-block">
          <div class="parallel-header">
            Parallel â€” Do These Together
          </div>
          <div class="parallel-body">
            {% for action in item.actions %}
              <div class="parallel-action">
                {% if action.image %}
                <img
                  src="{{ action.image }}"
                  alt="Step: {{ action.instruction | truncate(50) }}"
                  class="parallel-action-image"
                  loading="lazy"
                />
                {% endif %}
                <div class="flex justify-between items-center gap-3">
                  <span class="step-instruction">{{ action.instruction }}</span>
                  {% if action.durationMinutes %}
                  <span class="badge badge--ghost">{{ action.durationMinutes | formatMinutes }}</span>
                  {% endif %}
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>
