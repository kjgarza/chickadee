---
layout: layouts/base.njk
title: Recipes
---

<h1 class="text-3xl font-bold mb-6">Choose a Recipe</h1>

{# Collect all unique tags #}
{% set allTags = [] %}
{% for slug, recipe in recipes %}
  {% if recipe.tags %}
    {% for tag in recipe.tags %}
      {% if tag not in allTags %}
        {% set allTags = (allTags.push(tag), allTags) %}
      {% endif %}
    {% endfor %}
  {% endif %}
{% endfor %}

{# Tag Filter #}
<div id="tag-filter" class="mb-6">
  <p class="text-sm font-semibold mb-2">Filter by tag:</p>
  <div class="flex flex-wrap gap-2">
    <button class="btn btn-sm btn-primary tag-filter-btn" data-tag="all" onclick="filterByTag('all')">
      All
    </button>
    {% for tag in allTags %}
    <button class="btn btn-sm btn-outline tag-filter-btn" data-tag="{{ tag }}" onclick="filterByTag('{{ tag }}')">
      {{ tag }}
    </button>
    {% endfor %}
  </div>
</div>

<div id="recipe-grid" class="grid gap-4">
  {% for slug, recipe in recipes %}
  <a href="/recipes/{{ slug }}/" class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow recipe-card" data-tags="{{ recipe.tags | join(',') if recipe.tags else '' }}">
    <div class="card-body">
      <h2 class="card-title">{{ recipe.title }}</h2>
      {% if recipe.description %}
      <p class="text-base-content/70">{{ recipe.description }}</p>
      {% endif %}
      
      <div class="flex flex-wrap gap-2 mt-2">
        {% if recipe.difficulty %}
        <span class="badge badge-{{ 'success' if recipe.difficulty == 'easy' else ('warning' if recipe.difficulty == 'medium' else 'error') }}">
          {{ recipe.difficulty }}
        </span>
        {% endif %}
        
        {% if recipe.totalTimeMinutes %}
        <span class="badge badge-ghost">‚è±Ô∏è {{ recipe.totalTimeMinutes | formatMinutes }}</span>
        {% endif %}
        
        <span class="badge badge-ghost">üë• {{ recipe.servings.min }}-{{ recipe.servings.max }} servings</span>
      </div>
      
      {% if recipe.tags %}
      <div class="flex flex-wrap gap-1 mt-2">
        {% for tag in recipe.tags %}
        <span class="badge badge-outline badge-sm">{{ tag }}</span>
        {% endfor %}
      </div>
      {% endif %}
    </div>
  </a>
  {% else %}
  <div class="alert alert-info">
    <span>No recipes found. Add recipe JSON files to the _data folder.</span>
  </div>
  {% endfor %}
</div>

<script>
function filterByTag(tag) {
  // Update button states
  document.querySelectorAll('.tag-filter-btn').forEach(btn => {
    if (btn.dataset.tag === tag) {
      btn.classList.remove('btn-outline');
      btn.classList.add('btn-primary');
    } else {
      btn.classList.add('btn-outline');
      btn.classList.remove('btn-primary');
    }
  });
  
  // Filter recipe cards
  document.querySelectorAll('.recipe-card').forEach(card => {
    const cardTags = card.dataset.tags ? card.dataset.tags.split(',') : [];
    
    if (tag === 'all' || cardTags.includes(tag)) {
      card.classList.remove('hidden');
    } else {
      card.classList.add('hidden');
    }
  });
}
</script>
